<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writer's Challenge | Creative Writing Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .typewriter {
            border-right: 3px solid;
            animation: blink 0.75s step-end infinite;
        }
        @keyframes blink {
            from, to { border-color: transparent }
            50% { border-color: #4f46e5; }
        }
        .prompt-card {
            transition: all 0.3s ease;
        }
        .prompt-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .writing-area {
            min-height: 300px;
            transition: background-color 0.3s ease;
        }
        .writing-area:focus {
            background-color: #f8fafc;
        }
        .progress-ring__circle {
            transition: stroke-dashoffset 0.5s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-indigo-700 mb-4 typewriter inline-block">Writer's Challenge</h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">Spark your creativity with random prompts and timed writing challenges</p>
        </header>

        <!-- Game Controls -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
            <!-- Timer Section -->
            <div class="bg-white rounded-xl shadow-md p-6 flex flex-col items-center">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Set Timer</h2>
                <div class="flex items-center space-x-4 mb-6">
                    <button id="decrease-time" class="bg-gray-200 hover:bg-gray-300 rounded-full w-10 h-10 flex items-center justify-center">
                        <i class="fas fa-minus text-gray-700"></i>
                    </button>
                    <div class="relative">
                        <svg class="w-24 h-24">
                            <circle 
                                class="text-gray-200" 
                                stroke-width="8" 
                                stroke="currentColor" 
                                fill="transparent" 
                                r="40" 
                                cx="48" 
                                cy="48"
                            />
                            <circle 
                                id="progress-circle"
                                class="text-indigo-600 progress-ring__circle" 
                                stroke-width="8" 
                                stroke-linecap="round"
                                stroke="currentColor" 
                                fill="transparent" 
                                r="40" 
                                cx="48" 
                                cy="48"
                                stroke-dasharray="251.2"
                                stroke-dashoffset="0"
                            />
                        </svg>
                        <div class="absolute inset-0 flex items-center justify-center">
                            <span id="timer-display" class="text-2xl font-bold text-gray-800">5:00</span>
                        </div>
                    </div>
                    <button id="increase-time" class="bg-gray-200 hover:bg-gray-300 rounded-full w-10 h-10 flex items-center justify-center">
                        <i class="fas fa-plus text-gray-700"></i>
                    </button>
                </div>
                <div class="flex space-x-3">
                    <button id="start-timer" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-medium flex items-center">
                        <i class="fas fa-play mr-2"></i> Start
                    </button>
                    <button id="reset-timer" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-lg font-medium">
                        Reset
                    </button>
                </div>
            </div>

            <!-- Prompt Generator -->
            <div class="bg-white rounded-xl shadow-md p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Get Inspired</h2>
                <div class="mb-6">
                    <div class="flex flex-wrap gap-2 mb-4">
                        <button class="prompt-type-btn active bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm" data-type="all">All</button>
                        <button class="prompt-type-btn bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm" data-type="character">Character</button>
                        <button class="prompt-type-btn bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm" data-type="setting">Setting</button>
                        <button class="prompt-type-btn bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm" data-type="plot">Plot</button>
                        <button class="prompt-type-btn bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm" data-type="dialogue">Dialogue</button>
                    </div>
                    <button id="generate-prompt" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-lg font-medium">
                        Generate Prompt
                    </button>
                </div>
                <div id="current-prompt" class="bg-indigo-50 border-l-4 border-indigo-600 p-4 rounded-r-lg">
                    <p class="text-gray-800 italic">Click "Generate Prompt" to get started</p>
                </div>
            </div>

            <!-- Word Count -->
            <div class="bg-white rounded-xl shadow-md p-6 flex flex-col items-center justify-center">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Writing Stats</h2>
                <div class="text-center mb-6">
                    <div class="text-5xl font-bold text-indigo-600 mb-2" id="word-count">0</div>
                    <div class="text-gray-600">words</div>
                </div>
                <div class="text-center">
                    <div class="text-5xl font-bold text-indigo-600 mb-2" id="character-count">0</div>
                    <div class="text-gray-600">characters</div>
                </div>
            </div>
        </div>

        <!-- Writing Area -->
        <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold text-gray-800">Your Writing</h2>
                <button id="save-draft" class="text-indigo-600 hover:text-indigo-800 flex items-center">
                    <i class="fas fa-save mr-2"></i> Save Draft
                </button>
            </div>
            <textarea id="writing-area" class="writing-area w-full bg-white rounded-xl shadow-md p-6 border border-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent" placeholder="Start writing here..."></textarea>
        </div>

        <!-- Prompt Library -->
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Prompt Library</h2>
            <div id="prompt-library" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Prompts will be added here by JavaScript -->
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-gray-600 text-sm mt-12">
            <p>Writer's Challenge - A creative writing game to spark your imagination</p>
            <p class="mt-2">All your writing is saved locally in your browser</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const timerDisplay = document.getElementById('timer-display');
            const progressCircle = document.getElementById('progress-circle');
            const startTimerBtn = document.getElementById('start-timer');
            const resetTimerBtn = document.getElementById('reset-timer');
            const increaseTimeBtn = document.getElementById('increase-time');
            const decreaseTimeBtn = document.getElementById('decrease-time');
            const generatePromptBtn = document.getElementById('generate-prompt');
            const currentPromptDisplay = document.getElementById('current-prompt');
            const promptLibrary = document.getElementById('prompt-library');
            const writingArea = document.getElementById('writing-area');
            const wordCountDisplay = document.getElementById('word-count');
            const characterCountDisplay = document.getElementById('character-count');
            const saveDraftBtn = document.getElementById('save-draft');
            const promptTypeBtns = document.querySelectorAll('.prompt-type-btn');
            
            // Variables
            let timeLeft = 5 * 60; // 5 minutes in seconds
            let timerInterval;
            let isTimerRunning = false;
            let currentPromptType = 'all';
            const circumference = 2 * Math.PI * 40;
            
            // Prompt database
            const prompts = {
                character: [
                    "A retired superhero who's lost their powers but still tries to help people",
                    "A chef who can taste emotions in food",
                    "A librarian who secretly organizes books by the emotions they evoke",
                    "A taxi driver who collects stories instead of fares",
                    "A scientist who discovers they're actually an experiment themselves"
                ],
                setting: [
                    "A floating city that moves with the tides",
                    "A library where the books rewrite themselves every night",
                    "A diner at the edge of the universe that only opens during solar eclipses",
                    "A neighborhood where all the houses are built upside down",
                    "A train that travels through dreams instead of places"
                ],
                plot: [
                    "Someone receives a letter addressed to them but dated 50 years in the future",
                    "All the world's reflections start behaving independently of their originals",
                    "A person wakes up to find they've become invisible to everyone except one stranger",
                    "Every time someone tells a lie, a new star appears in the sky",
                    "A town where everyone wakes up speaking a different language each morning"
                ],
                dialogue: [
                    "\"I didn't steal it, I just borrowed it... permanently.\"",
                    "\"The problem with time travel isn't the paradoxes, it's the paperwork.\"",
                    "\"You're telling me this isn't the first time you've been turned into a cat?\"",
                    "\"I told you not to push that button!\" \"Which button? There are so many...\"",
                    "\"If we're being honest, I preferred you when you were a cactus.\""
                ]
            };

            // Initialize
            updateTimerDisplay();
            loadDraft();
            updateWordCount();
            
            // Event Listeners
            startTimerBtn.addEventListener('click', toggleTimer);
            resetTimerBtn.addEventListener('click', resetTimer);
            increaseTimeBtn.addEventListener('click', () => changeTime(1));
            decreaseTimeBtn.addEventListener('click', () => changeTime(-1));
            generatePromptBtn.addEventListener('click', generatePrompt);
            writingArea.addEventListener('input', updateWordCount);
            saveDraftBtn.addEventListener('click', saveDraft);
            
            promptTypeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    promptTypeBtns.forEach(b => b.classList.remove('active', 'bg-indigo-100', 'text-indigo-800'));
                    this.classList.add('active', 'bg-indigo-100', 'text-indigo-800');
                    currentPromptType = this.dataset.type;
                });
            });

            // Functions
            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                
                // Update progress circle
                const progress = timeLeft / (5 * 60); // 5 minutes is max
                const offset = circumference * (1 - progress);
                progressCircle.style.strokeDashoffset = offset;
            }

            function toggleTimer() {
                if (isTimerRunning) {
                    clearInterval(timerInterval);
                    isTimerRunning = false;
                    startTimerBtn.innerHTML = '<i class="fas fa-play mr-2"></i> Start';
                } else {
                    isTimerRunning = true;
                    startTimerBtn.innerHTML = '<i class="fas fa-pause mr-2"></i> Pause';
                    
                    timerInterval = setInterval(() => {
                        timeLeft--;
                        updateTimerDisplay();
                        
                        if (timeLeft <= 0) {
                            clearInterval(timerInterval);
                            isTimerRunning = false;
                            startTimerBtn.innerHTML = '<i class="fas fa-play mr-2"></i> Start';
                            alert("Time's up! How did your writing go?");
                        }
                    }, 1000);
                }
            }

            function resetTimer() {
                clearInterval(timerInterval);
                isTimerRunning = false;
                timeLeft = 5 * 60;
                updateTimerDisplay();
                startTimerBtn.innerHTML = '<i class="fas fa-play mr-2"></i> Start';
            }

            function changeTime(minutes) {
                if (isTimerRunning) return;
                
                const newTime = timeLeft + (minutes * 60);
                if (newTime >= 60 && newTime <= 30 * 60) { // Between 1 and 30 minutes
                    timeLeft = newTime;
                    updateTimerDisplay();
                }
            }

            function generatePrompt() {
                let selectedPrompts = [];
                
                if (currentPromptType === 'all') {
                    // Combine all prompts
                    for (const type in prompts) {
                        selectedPrompts = selectedPrompts.concat(prompts[type]);
                    }
                } else {
                    selectedPrompts = prompts[currentPromptType];
                }
                
                if (selectedPrompts.length > 0) {
                    const randomIndex = Math.floor(Math.random() * selectedPrompts.length);
                    const prompt = selectedPrompts[randomIndex];
                    
                    // Display current prompt
                    currentPromptDisplay.innerHTML = `<p class="text-gray-800 italic">"${prompt}"</p>`;
                    
                    // Add to prompt library
                    const promptCard = document.createElement('div');
                    promptCard.className = 'prompt-card bg-white rounded-lg shadow p-4 border border-gray-200 cursor-pointer hover:bg-indigo-50';
                    promptCard.innerHTML = `
                        <p class="text-gray-800 mb-2">"${prompt}"</p>
                        <span class="inline-block px-2 py-1 text-xs rounded-full ${getTypeColorClass(currentPromptType === 'all' ? getPromptType(prompt) : currentPromptType)}">
                            ${currentPromptType === 'all' ? getPromptType(prompt) : currentPromptType}
                        </span>
                    `;
                    
                    promptCard.addEventListener('click', () => {
                        currentPromptDisplay.innerHTML = `<p class="text-gray-800 italic">"${prompt}"</p>`;
                    });
                    
                    promptLibrary.insertBefore(promptCard, promptLibrary.firstChild);
                    
                    // Limit library to 12 prompts
                    if (promptLibrary.children.length > 12) {
                        promptLibrary.removeChild(promptLibrary.lastChild);
                    }
                }
            }

            function getPromptType(prompt) {
                for (const type in prompts) {
                    if (prompts[type].includes(prompt)) {
                        return type;
                    }
                }
                return 'general';
            }

            function getTypeColorClass(type) {
                const colors = {
                    character: 'bg-blue-100 text-blue-800',
                    setting: 'bg-green-100 text-green-800',
                    plot: 'bg-purple-100 text-purple-800',
                    dialogue: 'bg-yellow-100 text-yellow-800'
                };
                return colors[type] || 'bg-gray-100 text-gray-800';
            }

            function updateWordCount() {
                const text = writingArea.value;
                const wordCount = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
                const characterCount = text.length;
                
                wordCountDisplay.textContent = wordCount;
                characterCountDisplay.textContent = characterCount;
            }

            function saveDraft() {
                localStorage.setItem('writersChallengeDraft', writingArea.value);
                
                // Show feedback
                const originalText = saveDraftBtn.innerHTML;
                saveDraftBtn.innerHTML = '<i class="fas fa-check mr-2"></i> Saved!';
                setTimeout(() => {
                    saveDraftBtn.innerHTML = originalText;
                }, 2000);
            }

            function loadDraft() {
                const savedDraft = localStorage.getItem('writersChallengeDraft');
                if (savedDraft) {
                    writingArea.value = savedDraft;
                }
            }

            // Generate initial prompts for the library
            for (let i = 0; i < 3; i++) {
                generatePrompt();
            }
        });
    </script>
</body>
</html> 
